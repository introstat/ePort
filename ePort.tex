\documentclass{article}\usepackage[]{graphicx}\usepackage[]{color}
%% maxwidth is the original width if it is less than linewidth
%% otherwise use linewidth (to make sure the graphics do not exceed the margin)
\makeatletter
\def\maxwidth{ %
  \ifdim\Gin@nat@width>\linewidth
    \linewidth
  \else
    \Gin@nat@width
  \fi
}
\makeatother

\definecolor{fgcolor}{rgb}{0.345, 0.345, 0.345}
\newcommand{\hlnum}[1]{\textcolor[rgb]{0.686,0.059,0.569}{#1}}%
\newcommand{\hlstr}[1]{\textcolor[rgb]{0.192,0.494,0.8}{#1}}%
\newcommand{\hlcom}[1]{\textcolor[rgb]{0.678,0.584,0.686}{\textit{#1}}}%
\newcommand{\hlopt}[1]{\textcolor[rgb]{0,0,0}{#1}}%
\newcommand{\hlstd}[1]{\textcolor[rgb]{0.345,0.345,0.345}{#1}}%
\newcommand{\hlkwa}[1]{\textcolor[rgb]{0.161,0.373,0.58}{\textbf{#1}}}%
\newcommand{\hlkwb}[1]{\textcolor[rgb]{0.69,0.353,0.396}{#1}}%
\newcommand{\hlkwc}[1]{\textcolor[rgb]{0.333,0.667,0.333}{#1}}%
\newcommand{\hlkwd}[1]{\textcolor[rgb]{0.737,0.353,0.396}{\textbf{#1}}}%

\usepackage{framed}
\makeatletter
\newenvironment{kframe}{%
 \def\at@end@of@kframe{}%
 \ifinner\ifhmode%
  \def\at@end@of@kframe{\end{minipage}}%
  \begin{minipage}{\columnwidth}%
 \fi\fi%
 \def\FrameCommand##1{\hskip\@totalleftmargin \hskip-\fboxsep
 \colorbox{shadecolor}{##1}\hskip-\fboxsep
     % There is no \\@totalrightmargin, so:
     \hskip-\linewidth \hskip-\@totalleftmargin \hskip\columnwidth}%
 \MakeFramed {\advance\hsize-\width
   \@totalleftmargin\z@ \linewidth\hsize
   \@setminipage}}%
 {\par\unskip\endMakeFramed%
 \at@end@of@kframe}
\makeatother

\definecolor{shadecolor}{rgb}{.97, .97, .97}
\definecolor{messagecolor}{rgb}{0, 0, 0}
\definecolor{warningcolor}{rgb}{1, 0, 1}
\definecolor{errorcolor}{rgb}{1, 0, 0}
\newenvironment{knitrout}{}{} % an empty environment to be redefined in TeX

\usepackage{alltt}
\setlength{\parindent}{0pt} % Remove indent at new paragraphs
\setcounter{secnumdepth}{0}  % Remove section numbering at certain depth
\usepackage[round,sort]{natbib}
\usepackage{fixltx2e}
\usepackage{graphicx}	% For external pictures
\usepackage{float}
\usepackage{subfig}	% Add subfigures within figures
\usepackage{verbatim}
\usepackage[colorlinks=true,linkcolor=blue,citecolor=blue,urlcolor=blue]{hyperref}
\usepackage{amssymb,amsbsy,amsmath}
\usepackage{epsfig}
\usepackage[left=3cm,top=3cm,bottom=3.5cm,right=3cm]{geometry} % For easy document margins
\usepackage{fancyhdr} % For customization of header/footer
\usepackage{adjustbox}
\numberwithin{equation}{section} % Equation numbers relative to sections

% ---------------------------------------------------------------------------------------------------------------------------------------

% \VignetteIndexEntry{ePort: Student performance report generation for statistics instructors}
%\VignettePackage{ePort}
%\documentclass{amsart}
\newcommand{\code}[1]{{\texttt{#1}}}
\newcommand{\pkg}[1]{{\texttt{#1}}}
\newcommand{\class}[1]{{\textit{#1}}}
\newcommand{\R}{{\normalfont\textsf{R }}{}}
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\begin{document}




% <<label=R options,echo=FALSE>>=
% options(width = 60)
% options(SweaveHooks = list(fig = function() par(mar=c(3,3,1,0.5),mgp = c(2,1,0))))
% @

%\SweaveOpts{prefix.string=fig,include=F,keep.source=T,eps=FALSE}

% <<echo=false>>=
% options(continue="  ")
% @
% %@% TO ELIMINATE THE "+" IN CONSECUTIVE SCRIPT LINES

\title{Vignette for the ePort package:\\ Academic report generation for statistics instructors}
\author{Xiaoyue Cheng, Di Cook, Lindsay Rutter, Amy Froelich}
\date{\pkg{ePort} version 0.0.1 , 2015-10-08 }
\maketitle

\tableofcontents
\setcounter{footnote}{1} \footnotetext{This \LaTeX\ vignette document is created using the \R function \code{Sweave} on the \R package \pkg{ePort}. It is automatically downloaded with the package and can be accessed with the \R command \code{vignette("ePort")}.}  \newpage
\setlength{\parskip}{10pt} % Inter-paragraph spacing



\section{Summary}

The \pkg{ePort} package provides tools for course instructors to generate electronic reports regarding student performance. Instructors can produce reports immediately after homework assignment deadlines, and use them to better understand student performance throughout the teaching semester. The goal is to allow instructors to assess and improve upon their teaching approaches in a fast response cycle.

The tools in this package will be especially beneficial for users who supervise large introductory courses. These courses often consist of multiple topics (groups of learning outcomes) that are taught by multiple instructors across multiple sections (groups of students). To accomodate the various ways that student performance can be examined for such courses, the package can generate various reports that can compare within and between topics and sections.

At its simplest, a report can be generated for one topic and one section. This would allow course coordinators to determine how well a particular section performed on a particular topic.

Reports can also be generated for one topic across multiple sections, with output format that allows course coordinators to quickly determine how well and consistently the multiple sections performed on a particular topic. This could be particularly insightful in cases where discrepancies in student performance are discovered between sections, especially if different instructors and/or teaching methods are being used across the sections.

In addition, reports can be generated for one unit (group of topics), either within one section or between multiple sections. This allows coordinators to assess student performance across all the learning outcomes of the combined topics that form the unit, and to quantify the consistency of how students perform across sections.

Both short and long versions of reports can be generated for any of the aforementioned scenarios. Short versions of reports provide brief summarizations of student performance without regard to individual problems, whereas long versions of reports provide detailed summarizations of student performance for each problem in the assignment. Hence, reports can also be used to confirm the suitability of assigned problems. For instance, in some courses, problems that assess the same learning outcome and are intended to be of equal difficulty levels are grouped into a problem set, and each student is assigned a random subset from this set of problems. However, sometimes there may be an unexpected discrepancy in student performance between problems in a given problem set, indicating an unintended discrepancy in the clearness or difficulty level of the problems to which students are randomly assigned. This package will allow users to efficiently find and fix such issues. 

\bigskip

\section{Introduction}

\subsection{Installation}

\R is a open source software project for statistical computing, and can be freely downloaded from the Comprehensive R Archive Network (CRAN) website. The link to contributed documentation on the CRAN website offers practical resources for an introduction to \R, in several languages. After downloading and installing \R, the installation of additional packages is straightforward. To install the \pkg{ePort} package from \R, use the command:

\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlkwd{install.packages}\hlstd{(}\hlstr{"ePort"}\hlstd{)}
\end{alltt}
\end{kframe}
\end{knitrout}

\noindent
The \pkg{ePort} package should now be successfully installed. Next, to render it accessible to the current \R session, simply type:

\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlkwd{library}\hlstd{(ePort)}
\end{alltt}
\end{kframe}
\end{knitrout}

To access help pages with example syntax and documentation for the available functions of the \pkg{ePort} package, please type:

\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlkwd{help}\hlstd{(}\hlkwc{package}\hlstd{=}\hlstr{"ePort"}\hlstd{)}
\end{alltt}
\end{kframe}
\end{knitrout}

To access more detailed information about a specific function in the \pkg{ePort} package, use the following help command on that function, such as:

\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlkwd{help}\hlstd{(merge_section)}
\end{alltt}
\end{kframe}
\end{knitrout}

The above command will return the help file for the function. The help file often includes freestanding example syntax to illustrate how function commands are executed. In the case of the function, the example syntax is the following three lines, which can be pasted directly into an \R session.

\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlcom{# Fill later}
\end{alltt}
\end{kframe}
\end{knitrout}

\subsection{Preprocessing pipeline}

%sigma(system.file("examples/ediaspora.gexf.xml", package = "sigma"))

\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlstd{key_htm} \hlkwb{=} \hlstr{"/Users/lindz/ePort/inst/examples/KeyFiles/Topic06.Questions.htm"}
\hlcom{# generate a clean answer key with paths to the plots in questions}
\hlkwd{refine_key}\hlstd{(key_htm)}
\hlcom{# get the path/name of the new answer key}
\hlstd{key_txt} \hlkwb{=} \hlkwd{gsub}\hlstd{(}\hlstr{"htm$"}\hlstd{,}\hlstr{"txt"}\hlstd{,key_htm)}
\hlcom{# Get the path for a data file}
\hlstd{datapath} \hlkwb{=} \hlstr{"/Users/lindz/ePort/inst/examples/DataFiles/Topic06.AB.csv"}
\hlcom{# Get the path for the learning objective}
\hlstd{LOpath} \hlkwb{=} \hlstr{"/Users/lindz/ePort/inst/examples/OutcomeFiles/Topic06.Outcomes.txt"}
\hlkwd{rewrite_data}\hlstd{(datapath)}
\end{alltt}
\begin{verbatim}
## NULL
\end{verbatim}
\begin{alltt}
\hlcom{#report_routine(key_txt,datafile=datapath,rewrite=FALSE,LOfile=LOpath,knitfile="/Users/lindz/ePort/inst/Rnw/hw-individual-short.Rnw",knito="/Users/lindz/ePort/data/ReportFiles")}
\hlkwd{report_routine}\hlstd{(key_txt,}\hlkwc{datafile}\hlstd{=datapath,}\hlkwc{rewrite}\hlstd{=}\hlnum{FALSE}\hlstd{,}\hlkwc{LOfile}\hlstd{=LOpath,}\hlkwc{knitfile}\hlstd{=}\hlstr{"/Users/lindz/ePort/inst/Rnw/hw-individual-short.Rnw"}\hlstd{,}\hlkwc{knito}\hlstd{=}\hlstr{"/Users/lindz/ePort/inst/examples/ReportFiles"}\hlstd{)}
\end{alltt}
\begin{verbatim}
##   |                                                                         |                                                                 |   0%  |                                                                         |...                                                              |   4%
##   ordinary text without R code
## 
##   |                                                                         |......                                                           |   9%
## label: unnamed-chunk-15 (with options) 
## List of 1
##  $ include: logi FALSE
## 
##   |                                                                         |........                                                         |  13%
##   ordinary text without R code
## 
##   |                                                                         |...........                                                      |  17%
## label: setup (with options) 
## List of 1
##  $ echo: logi FALSE
## 
##   |                                                                         |..............                                                   |  22%
##    inline R code fragments
## 
##   |                                                                         |.................                                                |  26%
## label: histScore (with options) 
## List of 5
##  $ echo     : logi FALSE
##  $ fig.env  : chr "marginfigure"
##  $ out.width: chr "0.98\\linewidth"
##  $ fig.cap  : chr "Histogram of scores. Blue data represent scores less than 80 percent."
##  $ fig.lp   : chr "mar:"
##   |                                                                         |....................                                             |  30%
##    inline R code fragments
## 
##   |                                                                         |.......................                                          |  35%
## label: unnamed-chunk-16 (with options) 
## List of 2
##  $ echo   : logi FALSE
##  $ results: chr "asis"
## 
##   |                                                                         |.........................                                        |  39%
##   ordinary text without R code
## 
##   |                                                                         |............................                                     |  43%
## label: unnamed-chunk-17 (with options) 
## List of 3
##  $ echo   : logi FALSE
##  $ warning: logi FALSE
##  $ results: chr "asis"
\end{verbatim}


{\ttfamily\noindent\color{warningcolor}{\#\# Warning in `[<-.factor`(`*tmp*`, ri, value = "{} "{}): invalid factor level, NA generated}}

{\ttfamily\noindent\color{warningcolor}{\#\# Warning in `[<-.factor`(`*tmp*`, ri, value = "{} "{}): invalid factor level, NA generated}}\begin{verbatim}
##   |                                                                         |...............................                                  |  48%
##   ordinary text without R code
## 
##   |                                                                         |..................................                               |  52%
## label: condtion2 (with options) 
## List of 2
##  $ echo   : logi FALSE
##  $ results: chr "asis"
## 
##   |                                                                         |.....................................                            |  57%
##    inline R code fragments
## 
##   |                                                                         |........................................                         |  61%
## label: unnamed-chunk-18 (with options) 
## List of 2
##  $ echo   : logi FALSE
##  $ results: chr "asis"
## 
##   |                                                                         |..........................................                       |  65%
##   ordinary text without R code
## 
##   |                                                                         |.............................................                    |  70%
## label: unnamed-chunk-19 (with options) 
## List of 3
##  $ echo   : logi FALSE
##  $ warning: logi FALSE
##  $ results: chr "asis"
## 
##   |                                                                         |................................................                 |  74%
##    inline R code fragments
## 
##   |                                                                         |...................................................              |  78%
## label: unnamed-chunk-20 (with options) 
## List of 2
##  $ results: chr "asis"
##  $ echo   : logi FALSE
## 
##   |                                                                         |......................................................           |  83%
##   ordinary text without R code
## 
##   |                                                                         |.........................................................        |  87%
## label: LearningObj_summary (with options) 
## List of 3
##  $ echo     : logi FALSE
##  $ out.width: chr "0.98\\linewidth"
##  $ fig.cap  : chr "Fluctuation diagram of percentage correct by learning outcome. Mean scores are drawn as blue bars"
##   |                                                                         |...........................................................      |  91%
##   ordinary text without R code
## 
##   |                                                                         |..............................................................   |  96%
## label: unnamed-chunk-21 (with options) 
## List of 2
##  $ echo   : logi FALSE
##  $ results: chr "asis"
## 
##   |                                                                         |.................................................................| 100%
##   ordinary text without R code
## [1] "/Users/lindz/ePort/inst/examples/ReportFiles/Stat101hwk_Topic06_AB-short.pdf"
\end{verbatim}
\end{kframe}
\end{knitrout}

\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlcom{#report_routine(key_txt,datapath,rewrite=FALSE,LOfile=LOpath,knitfile="/Users/lindz/ePort/inst/Rnw/hw-individual-short.Rnw",knito=getwd())}
\hlcom{#report_routine(key_txt,datafile=datapath,rewrite=FALSE,LOfile=LOpath,knitfile="/Users/lindz/ePort/inst/Rnw/hw-individual-short.Rnw")}
\end{alltt}
\end{kframe}
\end{knitrout}

\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlcom{#data(sbGeneal)}
\hlcom{#head(sbGeneal)}
\hlcom{#dim(sbGeneal)}
\hlcom{#str(sbGeneal)}
\end{alltt}
\end{kframe}
\end{knitrout}

\section{Generating Reports}

The \pkg{ePort} package offers several functions that result in useful reports. Below is a brief introduction to some of the available functions.

\subsection{One section one topic}

The \pkg{ePort} package offers several functions that you can use to obtain information for individual vertices. First, the function \texttt{isParent()} can return a logical variable to indicate whether or not the second variety is a parent of the first variety.

\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlcom{#isParent("Young","Essex",sbGeneal)}
\hlcom{#isParent("Essex","Young",sbGeneal)}
\end{alltt}
\end{kframe}
\end{knitrout}

We see that ``Essex" is a parent of ``Young", and not vice-versa. In some cases, you may wish to obtain a complete list of all the parents of a given variety. This can be achieved using the \texttt{getParent()} function:

\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlcom{#getParent("Young",sbGeneal)}
\hlcom{#getParent("Tokyo",sbGeneal)}
\hlcom{#getYear("Tokyo", sbGeneal)}
\end{alltt}
\end{kframe}
\end{knitrout}

We learn from this that ``Essex" is not the only parent of ``Young"; ``Young" also has a parent ``Davis". We also see that ``Tokyo" does not have any documented parents in this dataset, and has an older year of introduction than other varieties we have examined thusfar. Likewise, in other cases, you may wish to obtain a complete list of all the children of a given variety. This can be achieved using the \texttt{getChild()} function:

\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlcom{#getChild("Tokyo",sbGeneal)}
\hlcom{#getChild("Ogden",sbGeneal)}
\end{alltt}
\end{kframe}
\end{knitrout}

We find that even though the ``Tokyo" variety is a grandparent of the dataset, it only has two children, ``Ogden" and ``Volstate". However, one of its children, ``Ogden", produced Sexpr{length(getChild("Ogden",sbGeneal))} children.

If we want to obtain a list that contains more than just one generation past or previous to a given variety, then we can use the \texttt{getAncestors()} and \texttt{getDescendants()} functions, where we specify the number of generations we wish to view. This will return a data frame to us with the labels of each ancestor or descendant, along with the number of generations each one is from the given variety.

If we only look at one generation of ancestors of the ``Young" variety, we should see the same information we did earlier when we used the \texttt{getParent()} function of the Young variety.

\subsection{{Multiple section one topic}}

Say you have a pair of vertices, and you wish to determine the degree of the shortest path between them, where edges represent parent-child relationships. You can accomplish that with the \texttt{getDegree()} function.

\begin{knitrout}
\definecolor{shadecolor}{rgb}{0.969, 0.969, 0.969}\color{fgcolor}\begin{kframe}
\begin{alltt}
\hlcom{#getDegree("Tokyo", "Ogden", ig, sbGeneal)}
\hlcom{#getDegree("Tokyo", "Holladay", ig, sbGeneal)}
\end{alltt}
\end{kframe}
\end{knitrout}

\subsection{One section Multiple topics}

Until this point, the vignette has introduced functions that return lists, data frames, and statistics about the genealogical dataset. However, the \pkg{ePort} package also contains visualization tools for genealogical datasets. Access to various types of visual plots and diagrams of the lineage can allow genealogical researchers to more efficiently and accurately explore an otherwise complicated data structure. Below, we introduce functions in \pkg{ePort} that produce visual outputs of the dataset.

\subsection{Multiple Sections Multiple Topics}

One visualization tool, \texttt{plotAncDes()}, allows the user to view the ancestors and descendants of a given variety. The inputted variety is highlighted in the center of the plot, ancestors are displayed to the left of the center, and descendants are displayed to the right of the center. The further left or right from the center, the larger the number of generations that particular ancestor/descendant is from the inputted and centered variety.

As such, this plotting command does not provide visual information about specific years associated with each related variety (as is done in some of the visualization tools introduced later), but it does group all varieties from each generation group onto the same position of the horizontal axis. Here, we specify that we want to plot 5 ancestor generations and 4 descendant generations of the variety ``Lee":

\section{Short reports}

\subsection{Brief summarizations}
\subsection{Low-scoring students}

\section{Long reports}

\subsection{Individual problem summarizations}
\subsection{Clustering analysis}

\section{Conclusions}

The \pkg{ePort} package offers various plotting tools that can assist those studying genealogical lineages in the data exploration phases. As each plot comes with its advantages and disadvantages, we recommend for users to explore several of the available visualization tools.

This vignette briefly introduced some of the capabilities of the \pkg{ePort} package. Inevitably, new approaches will necessitate new features in subsequent versions and might reveal unforeseen bugs. Please send comments, suggestions, questions, and bug reports to \texttt{amyf@iastate.edu}.

\end{document}
